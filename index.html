<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap Books | Home</title>

    <!-- NPM Modules -->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">

    <!-- CDN -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->

    <!-- Fab Icon Pack -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">


    <!-- Setup for bootstrap via npm is different then CDN method. Bootstrap is installed via npm packages.
        I have bootstrap css, bootstrap js, and popper js installed. The 'min' files are used instead of the full files for when this site is eventually deployed.
        Also, reset and normalize stylesheets are not needed since bootsrap has built in reset styles. -->
</head>

<body>
    <!-- Navbar -->
    <header>
        <!-- navbar is responsive and changes based on screen size -->
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <!-- 
        navbar: Bootstrap class for styling navigation bars.
        navbar-expand-md: The navbar will be horizontal on medium (md) devices and larger, and collapsible on smaller screens.
        navbar-dark: Indicates dark-colored text for the navigation bar links.
        bg-dark: Sets the background color of the navbar to dark.
        -->
            <div class="container-fluid">
                <!-- container-fluid: Makes the container width span the entire viewport width. -->
                <a class="navbar-brand" href="#">Bootstrap Books</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <!-- 
                navbar-toggler: Styles the button that toggles the navbar on small screens.
                data-bs-toggle="collapse": Bootstrap data attribute for collapsing and expanding content.
                data-bs-target="#navbarNav": Targets the element with id="navbarNav" for the toggle action.
                -->
                    <span class="navbar-toggler-icon"></span>
                    <!-- navbar-toggler-icon: Adds an icon for the toggle button. -->
                </button>
                <!-- Navbar links -->
                <div class="collapse navbar-collapse" id="navbarNav">
                    <!-- collapse: Hides the content on small screens and shows it when toggled or on larger screens.
                navbar-collapse: Styles the collapsible part of the navbar. -->
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="./index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./pages/contact.html">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.linkedin.com/in/jag1997/" target="_blank">
                                <i class="fab fa-linkedin"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/Exo-MDR-CD2000" target="_blank">
                                <i class="fab fa-github"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <!-- add favicon links to github and linkedin inside the navbar above -->

    <!-- Container below follows the card layout -->
    <!-- Bootstrap has several properties for spacing and alignment such as mt-3 -->
    <div class="container mt-3">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title text-center"> Your Online Book Catalog </h2>
                <p class="card-text"> This is a simple web application that allows you to keep track of your personal
                    book collection. You can add new books to your catalog, view all the books you have added, and
                    delete books you no longer want to keep track of. </p>
            </div>
        </div>
    </div>

    <!-- Bottom container now follows the grid layout -->
    <div class="container mt-4">
        <!-- 
        container: Bootstrap class that provides a responsive fixed width container.
        mt-4: Adds a margin-top with a size of 4 (Bootstrap's spacing scale).
        -->
        <h3>Add a New Book</h3>
        <form id="bookForm">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <!-- 
                    col-md-6: Creates a column that spans 6 out of 12 possible columns on medium devices and larger. 
                    mb-3: Adds a margin-bottom with a size of 3.
                    -->
                    <label for="title" class="form-label">Title</label>
                    <input type="text" class="form-control" id="title" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="author" class="form-label">Author</label>
                    <input type="text" class="form-control" id="author" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="genre" class="form-label">Genre</label>
                    <input type="text" class="form-control" id="genre" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="year" class="form-label">Year Published</label>
                    <input type="number" class="form-control" id="year" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="publisher" class="form-label">Publisher</label>
                    <input type="text" class="form-control" id="publisher" required>
                </div>
                <div class="col-md-3 mb-3">
                    <label for="isbn" class="form-label">ISBN</label>
                    <input type="text" class="form-control" id="isbn" required>
                </div>
            </div>
            <div class="row">
                <div class="col-4 mb-3">
                    <label for="pageCount" class="form-label">Page Count</label>
                    <input type="number" class="form-control" id="pageCount" required>
                </div>
                <div class="col-6 mb-3">
                    <label for="rating" class="form-label">Rating</label>
                    <input type="range" class="form-range" id="rating" min="0" max="5" step="0.5" value="0"
                        oninput="ratingValue.value = this.value" required>
                    <output id="ratingValue">0</output>
                </div>
            </div>
            <div class="row">
                <div class="col-4 mb-3">
                    <label for="read" class="form-check-label">Read?</label>
                    <input type="checkbox" class="form-check-input" id="read">
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Add Book</button>
        </form>
    </div>

    <!-- Table to display all books in the catalog -->
    <!-- This container is mobile responsive due to the 'table-responsive' property -->
    <div class="container mt-4">
        <h3>Book Catalog</h3>
        <div class="table-responsive">
            <table class="table table-striped table-hover" id="bookTable">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Genre</th>
                        <th>Year Published</th>
                        <th>Publisher</th>
                        <th>ISBN</th>
                        <th>Page Count</th>
                        <th>Rating</th>
                        <th>Read?</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Sample Book Entry -->
                    <tr>
                        <td>The Great Gatsby</td>
                        <td>F. Scott Fitzgerald</td>
                        <td>Classic</td>
                        <td>1925</td>
                        <td>Charles Scribner's Sons</td>
                        <td>978-0743273565</td>
                        <td>180</td>
                        <td>4.5</td>
                        <td><input type="checkbox" class="form-check-input" checked></td>
                        <td><button type="button" class="btn btn-sm btn-info">Example</button></td>
                    </tr>
                    <!-- Add more book entries here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Footer -->

    <footer class="footer mt-3 py-3 bg-dark-subtle text-center">
        <div class="container">
            <span class="text-muted fst-italic">J.A.G 2024</span>
            <!-- above mutes the text and italicized -->
        </div>
    </footer>


    <!-- The main point when using the grid layout is to remember that each line can go up to 12 before the content wraps to the next line -->

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const bookForm = document.getElementById('bookForm');
            const bookTableBody = document.querySelector('#bookTable tbody');

            // Load books from localStorage on page load
            loadBooks();

            bookForm.addEventListener('submit', function (event) {
                event.preventDefault(); // Prevent form submission

                // Get form values
                const title = document.getElementById('title').value;
                const author = document.getElementById('author').value;
                const genre = document.getElementById('genre').value;
                const year = document.getElementById('year').value;
                const publisher = document.getElementById('publisher').value;
                const isbn = document.getElementById('isbn').value;
                const pageCount = document.getElementById('pageCount').value;
                const rating = document.getElementById('rating').value;
                const read = document.getElementById('read').checked;

                // Create a new book object
                const book = { title, author, genre, year, publisher, isbn, pageCount, rating, read };

                // Add book to the table and localStorage
                addBookToTable(book);
                saveBookToLocalStorage(book);

                // Reset the form
                bookForm.reset();
                document.getElementById('ratingValue').value = 0;
            });

            function loadBooks() {
                const books = JSON.parse(localStorage.getItem('books')) || [];
                books.forEach(book => addBookToTable(book));
            }

            function saveBookToLocalStorage(book) {
                const books = JSON.parse(localStorage.getItem('books')) || [];
                books.push(book);
                localStorage.setItem('books', JSON.stringify(books));
            }

            function addBookToTable(book) {
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${book.title}</td>
                    <td>${book.author}</td>
                    <td>${book.genre}</td>
                    <td>${book.year}</td>
                    <td>${book.publisher}</td>
                    <td>${book.isbn}</td>
                    <td>${book.pageCount}</td>
                    <td>${book.rating}</td>
                    <td><input type="checkbox" class="form-check-input" ${book.read ? 'checked' : ''} enabled></td>
                    <td><button class="btn btn-danger btn-sm delete-btn">Delete</button></td>
                `;
                bookTableBody.appendChild(newRow);

                // Add event listener for delete button
                newRow.querySelector('.delete-btn').addEventListener('click', function () {
                    deleteBook(newRow, book);
                });
            }

            function deleteBook(row, book) {
                const books = JSON.parse(localStorage.getItem('books')) || [];
                const index = books.findIndex(b => b.isbn === book.isbn);
                if (index !== -1) {
                    books.splice(index, 1);
                    localStorage.setItem('books', JSON.stringify(books));
                    row.remove();
                }
            }
        });
    </script>

    <!-- Popper must be loaded in first before bootstrap JS -->

    <!-- NPM modules -->
    <script src="../node_modules/@popperjs/core/dist/umd/popper.min.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <!-- CDN -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script> -->

</body>

</html>